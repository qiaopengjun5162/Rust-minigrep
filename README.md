# Rust-minigrep

## Explain main.rs code

è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨æ–‡ä»¶ä¸­æœç´¢æŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚ä»¥ä¸‹æ˜¯ä»£ç çš„æ­¥éª¤è§£é‡Šï¼š

1. å¯¼å…¥äº†  `minigrep::Config`  ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“ç”¨äºå­˜å‚¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€‚
2. å¯¼å…¥äº†  `std::env`  å’Œ  `std::process`  æ¨¡å—ï¼Œç”¨äºå¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œè¿›ç¨‹æ§åˆ¶ã€‚
3. åœ¨  `main`  å‡½æ•°ä¸­ï¼Œé€šè¿‡è°ƒç”¨  `Config::new`  æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ª  `config`  å¯¹è±¡ï¼Œå¹¶å°†å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚
4. å¦‚æœ  `Config::new`  æ–¹æ³•è¿”å›ä¸€ä¸ªé”™è¯¯ï¼ˆè¡¨ç¤ºå‚æ•°è§£æå¤±è´¥ï¼‰ï¼Œåˆ™ä½¿ç”¨  `eprintln!`  å®æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è°ƒç”¨  `process::exit`  æ–¹æ³•é€€å‡ºç¨‹åºã€‚
5. å¦‚æœå‚æ•°è§£ææˆåŠŸï¼Œè°ƒç”¨  `minigrep::run`  æ–¹æ³•å¹¶å°†  `config`  å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚
6. å¦‚æœ  `minigrep::run`  æ–¹æ³•è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œè¡¨ç¤ºæœç´¢è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼ŒåŒæ ·ä½¿ç”¨  `eprintln!`  å®æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è°ƒç”¨  `process::exit`  æ–¹æ³•é€€å‡ºç¨‹åºã€‚

æ€»ç»“ï¼šè¯¥ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨æ–‡ä»¶ä¸­æœç´¢æŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚å®ƒé€šè¿‡  `Config`  ç»“æ„ä½“å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨  `minigrep::run`  æ–¹æ³•æ‰§è¡Œæœç´¢æ“ä½œã€‚å¦‚æœå‚æ•°è§£ææˆ–æœç´¢è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œç¨‹åºä¼šæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚

## Explain lib.rs code

è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æœç´¢ç¨‹åºã€‚å®ƒæ¥å—ä¸€ä¸ªåŒ…å«æŸ¥è¯¢å­—ç¬¦ä¸²å’Œæ–‡ä»¶åçš„é…ç½®ï¼Œå¹¶æ ¹æ®é…ç½®æœç´¢æ–‡ä»¶ä¸­åŒ…å«æŸ¥è¯¢å­—ç¬¦ä¸²çš„è¡Œã€‚å®ƒå¯ä»¥æ ¹æ®é…ç½®çš„å¤§å°å†™æ•æ„Ÿæ€§è¿›è¡Œæœç´¢ã€‚

ä»£ç çš„æ­¥éª¤å¦‚ä¸‹ï¼š

1. å¯¼å…¥å¿…è¦çš„æ¨¡å—ï¼š `std::env` ç”¨äºå¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼Œ `std::error::Error` ç”¨äºå¤„ç†é”™è¯¯ï¼Œ `std::fs` ç”¨äºè¯»å–æ–‡ä»¶å†…å®¹ã€‚
2. å®šä¹‰ä¸€ä¸ªåä¸º `run` çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª `Config` ç»“æ„ä½“ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª `Result` ç±»å‹çš„ç»“æœã€‚
3. åœ¨ `run` å‡½æ•°ä¸­ï¼Œä½¿ç”¨ `fs::read_to_string` å‡½æ•°è¯»å–é…ç½®ä¸­æŒ‡å®šçš„æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ `contents` å˜é‡ä¸­ã€‚
4. æ ¹æ®é…ç½®çš„å¤§å°å†™æ•æ„Ÿæ€§ï¼Œä½¿ç”¨ `search` å‡½æ•°æˆ– `search_case_insensitive` å‡½æ•°å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œæœç´¢ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ `results` å˜é‡ä¸­ã€‚
5. éå† `results` ä¸­çš„æ¯ä¸€è¡Œï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚
6. æœ€åè¿”å›ä¸€ä¸ª `Ok(())` è¡¨ç¤ºå‡½æ•°æ‰§è¡ŒæˆåŠŸã€‚

 `Config` ç»“æ„ä½“å®šä¹‰äº†æŸ¥è¯¢å­—ç¬¦ä¸²ã€æ–‡ä»¶åå’Œå¤§å°å†™æ•æ„Ÿæ€§çš„å­—æ®µï¼Œå¹¶æä¾›äº†ä¸€ä¸ª `new` æ–¹æ³•æ¥åˆ›å»º `Config` å®ä¾‹ã€‚ `new` æ–¹æ³•æ¥å—ä¸€ä¸ª `std::env::Args` è¿­ä»£å™¨ä½œä¸ºå‚æ•°ï¼Œä»è¿­ä»£å™¨ä¸­è·å–æŸ¥è¯¢å­—ç¬¦ä¸²å’Œæ–‡ä»¶åï¼Œå¹¶æ ¹æ®ç¯å¢ƒå˜é‡ `CASE_INSENSITIVE` çš„å€¼ç¡®å®šå¤§å°å†™æ•æ„Ÿæ€§ã€‚

 `search` å‡½æ•°æ¥å—ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ–‡æœ¬å†…å®¹å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…æŸ¥è¯¢å­—ç¬¦ä¸²çš„è¡Œçš„å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å‘é‡ã€‚å®ƒä½¿ç”¨ `contents.lines()` æ–¹æ³•å°†æ–‡æœ¬å†…å®¹æŒ‰è¡Œåˆ†å‰²ï¼Œå¹¶ä½¿ç”¨ `filter` æ–¹æ³•è¿‡æ»¤å‡ºåŒ…å«æŸ¥è¯¢å­—ç¬¦ä¸²çš„è¡Œã€‚

 `search_case_insensitive` å‡½æ•°ä¸ `search` å‡½æ•°ç±»ä¼¼ï¼Œä½†å®ƒä¼šå°†æŸ¥è¯¢å­—ç¬¦ä¸²å’Œæ–‡æœ¬å†…å®¹éƒ½è½¬æ¢ä¸ºå°å†™å­—æ¯åå†è¿›è¡ŒåŒ¹é…ï¼Œä»¥å®ç°å¤§å°å†™ä¸æ•æ„Ÿçš„æœç´¢ã€‚

 `tests` æ¨¡å—åŒ…å«äº†ä¸€äº›å•å…ƒæµ‹è¯•ï¼Œç”¨äºæµ‹è¯• `search` å’Œ `search_case_insensitive` å‡½æ•°çš„åŠŸèƒ½ã€‚å…¶ä¸­ `case_sensitive` å‡½æ•°æµ‹è¯•äº†å¤§å°å†™æ•æ„Ÿçš„æœç´¢ï¼Œ `case_insensitive` å‡½æ•°æµ‹è¯•äº†å¤§å°å†™ä¸æ•æ„Ÿçš„æœç´¢ã€‚

## Usage

```shell
minigrep on î‚  master [?] is ğŸ“¦ 0.1.0 via ğŸ¦€ 1.72.1 via ğŸ…’ base 
âœ cargo run > output.txt    
   Compiling minigrep v0.1.0 (/Users/qiaopengjun/Code/rust/minigrep)
    Finished dev [unoptimized + debuginfo] target(s) in 0.94s
     Running `target/debug/minigrep`
Problem parsing arguments: not enough arguments

minigrep on î‚  master [?] is ğŸ“¦ 0.1.0 via ğŸ¦€ 1.72.1 via ğŸ…’ base 
âœ cargo run -- to poem.txt > output.txt 
    Finished dev [unoptimized + debuginfo] target(s) in 0.02s
     Running `target/debug/minigrep to poem.txt`
```

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒï¼š<https://course.rs/basic-practice/intro.html#%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F>
